{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Desktop\\\\afford\\\\src\\\\pages\\\\Redirector.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Redirector() {\n  _s();\n  const {\n    shortcode\n  } = useParams();\n  useEffect(() => {\n    const data = JSON.parse(localStorage.getItem('shortenedUrls') || '[]');\n    const index = data.findIndex(u => u.shortcode === shortcode);\n    if (index > -1) {\n      const item = data[index];\n      const now = Date.now();\n      if (now < item.expiry) {\n        const click = {\n          time: new Date().toLocaleString(),\n          location: 'IN',\n          // mock\n          source: document.referrer || 'direct'\n        };\n        item.clicks.push(click);\n        data[index] = item;\n        localStorage.setItem('shortenedUrls', JSON.stringify(data));\n        window.location.href = item.original;\n      } else {\n        alert('This link has expired.');\n      }\n    } else {\n      alert('Invalid short link.');\n    }\n  }, [shortcode]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Redirecting...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 10\n  }, this);\n}\n_s(Redirector, \"Z64ES9pUWAY57+2y3vr1QS+VHy0=\", false, function () {\n  return [useParams];\n});\n_c = Redirector;\nexport default Redirector;\nvar _c;\n$RefreshReg$(_c, \"Redirector\");","map":{"version":3,"names":["React","useEffect","useParams","jsxDEV","_jsxDEV","Redirector","_s","shortcode","data","JSON","parse","localStorage","getItem","index","findIndex","u","item","now","Date","expiry","click","time","toLocaleString","location","source","document","referrer","clicks","push","setItem","stringify","window","href","original","alert","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/DELL/Desktop/afford/src/pages/Redirector.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\n\r\ninterface UrlData {\r\n  original: string;\r\n  shortcode: string;\r\n  expiry: number;\r\n  created: number;\r\n  clicks: Array<{\r\n    time: string;\r\n    location: string;\r\n    source: string;\r\n  }>;\r\n}\r\n\r\nfunction Redirector() {\r\n  const { shortcode } = useParams<{ shortcode: string }>();\r\n\r\n  useEffect(() => {\r\n    const data: UrlData[] = JSON.parse(localStorage.getItem('shortenedUrls') || '[]');\r\n    const index = data.findIndex((u) => u.shortcode === shortcode);\r\n    if (index > -1) {\r\n      const item = data[index];\r\n      const now = Date.now();\r\n      if (now < item.expiry) {\r\n        const click = {\r\n          time: new Date().toLocaleString(),\r\n          location: 'IN', // mock\r\n          source: document.referrer || 'direct',\r\n        };\r\n        item.clicks.push(click);\r\n        data[index] = item;\r\n        localStorage.setItem('shortenedUrls', JSON.stringify(data));\r\n        window.location.href = item.original;\r\n      } else {\r\n        alert('This link has expired.');\r\n      }\r\n    } else {\r\n      alert('Invalid short link.');\r\n    }\r\n  }, [shortcode]);\r\n\r\n  return <div>Redirecting...</div>;\r\n}\r\n\r\nexport default Redirector; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,SAAS,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAc7C,SAASC,UAAUA,CAAA,EAAG;EAAAC,EAAA;EACpB,MAAM;IAAEC;EAAU,CAAC,GAAGL,SAAS,CAAwB,CAAC;EAExDD,SAAS,CAAC,MAAM;IACd,MAAMO,IAAe,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC,IAAI,IAAI,CAAC;IACjF,MAAMC,KAAK,GAAGL,IAAI,CAACM,SAAS,CAAEC,CAAC,IAAKA,CAAC,CAACR,SAAS,KAAKA,SAAS,CAAC;IAC9D,IAAIM,KAAK,GAAG,CAAC,CAAC,EAAE;MACd,MAAMG,IAAI,GAAGR,IAAI,CAACK,KAAK,CAAC;MACxB,MAAMI,GAAG,GAAGC,IAAI,CAACD,GAAG,CAAC,CAAC;MACtB,IAAIA,GAAG,GAAGD,IAAI,CAACG,MAAM,EAAE;QACrB,MAAMC,KAAK,GAAG;UACZC,IAAI,EAAE,IAAIH,IAAI,CAAC,CAAC,CAACI,cAAc,CAAC,CAAC;UACjCC,QAAQ,EAAE,IAAI;UAAE;UAChBC,MAAM,EAAEC,QAAQ,CAACC,QAAQ,IAAI;QAC/B,CAAC;QACDV,IAAI,CAACW,MAAM,CAACC,IAAI,CAACR,KAAK,CAAC;QACvBZ,IAAI,CAACK,KAAK,CAAC,GAAGG,IAAI;QAClBL,YAAY,CAACkB,OAAO,CAAC,eAAe,EAAEpB,IAAI,CAACqB,SAAS,CAACtB,IAAI,CAAC,CAAC;QAC3DuB,MAAM,CAACR,QAAQ,CAACS,IAAI,GAAGhB,IAAI,CAACiB,QAAQ;MACtC,CAAC,MAAM;QACLC,KAAK,CAAC,wBAAwB,CAAC;MACjC;IACF,CAAC,MAAM;MACLA,KAAK,CAAC,qBAAqB,CAAC;IAC9B;EACF,CAAC,EAAE,CAAC3B,SAAS,CAAC,CAAC;EAEf,oBAAOH,OAAA;IAAA+B,QAAA,EAAK;EAAc;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;AAClC;AAACjC,EAAA,CA5BQD,UAAU;EAAA,QACKH,SAAS;AAAA;AAAAsC,EAAA,GADxBnC,UAAU;AA8BnB,eAAeA,UAAU;AAAC,IAAAmC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}